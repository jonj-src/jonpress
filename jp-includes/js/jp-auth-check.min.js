!function(a){function b(){var b,d=a("#jp-auth-check"),f=a("#jp-auth-check-form"),g=e.find(".jp-auth-fallback-expired"),h=!1;f.length&&(a(window).on("beforeunload.jp-auth-check",function(a){a.originalEvent.returnValue=window.authcheckL10n.beforeunload}),b=a('<iframe id="jp-auth-check-frame" frameborder="0">').attr("title",g.text()),b.on("load",function(){var b,i;h=!0,f.removeClass("loading");try{i=a(this).contents().find("body"),b=i.height()}catch(j){return e.addClass("fallback"),d.css("max-height",""),f.remove(),void g.focus()}b?i&&i.hasClass("interim-login-success")?c():d.css("max-height",b+40+"px"):i&&i.length||(e.addClass("fallback"),d.css("max-height",""),f.remove(),g.focus())}).attr("src",f.data("src")),f.append(b)),a("body").addClass("modal-open"),e.removeClass("hidden"),b?(b.focus(),setTimeout(function(){h||(e.addClass("fallback"),f.remove(),g.focus())},1e4)):g.focus()}function c(){a(window).off("beforeunload.jp-auth-check"),"undefined"==typeof adminpage||"post-php"!==adminpage&&"post-new-php"!==adminpage||"undefined"==typeof wp||!wp.heartbeat||(a(document).off("heartbeat-tick.jp-auth-check"),wp.heartbeat.connectNow()),e.fadeOut(200,function(){e.addClass("hidden").css("display",""),a("#jp-auth-check-frame").remove(),a("body").removeClass("modal-open")})}function d(){var a=parseInt(window.authcheckL10n.interval,10)||180;f=(new Date).getTime()+1e3*a}var e,f;a(document).on("heartbeat-tick.jp-auth-check",function(a,f){"jp-auth-check"in f&&(d(),!f["jp-auth-check"]&&e.hasClass("hidden")?b():f["jp-auth-check"]&&!e.hasClass("hidden")&&c())}).on("heartbeat-send.jp-auth-check",function(a,b){(new Date).getTime()>f&&(b["jp-auth-check"]=!0)}).ready(function(){d(),e=a("#jp-auth-check-wrap"),e.find(".jp-auth-check-close").on("click",function(){c()})})}(jQuery);